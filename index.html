<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Freecam Menu</title>

<style>
body {
    margin: 0;
    background: transparent;
    font-family: Arial, Helvetica, sans-serif;
    display: none;
}

/* PANEL */
#panel {
    position: absolute;
    left: 50%;
    bottom: 4vw;
    transform: translateX(-50%);
    width: 320px;
    background: rgba(0,0,0,0.85);
    border: 1px solid #00ff99;
    border-radius: 12px;
    padding: 14px;
    color: white;
}

/* TITLE */
#title {
    text-align: center;
    font-size: 20px;
    font-weight: bold;
    color: #00ff99;
    margin-bottom: 10px;
}

/* BUTTON */
button {
    width: 100%;
    margin: 4px 0;
    padding: 8px;
    background: #111;
    color: white;
    border: 1px solid #00ff99;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
}
button:hover {
    background: #00ff99;
    color: black;
}

/* SECTION */
.section {
    margin-top: 10px;
    font-size: 14px;
    opacity: 0.85;
}

/* SELECT */
select {
    width: 100%;
    padding: 6px;
    background: #111;
    color: white;
    border: 1px solid #00ff99;
    border-radius: 6px;
}

/* SLIDER */
input[type=range] {
    width: 100%;
}

/* MODEL TEXT */
.model {
    text-align: center;
    margin-top: 4px;
    font-size: 13px;
    color: #00ff99;
}

/* CROSSHAIR */
#crosshair {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 16px;
    height: 16px;
    transform: translate(-50%, -50%);
    border: 2px solid white;
    border-radius: 50%;
    opacity: 0.8;
}
</style>
</head>

<body>

<div id="crosshair"></div>

<div id="panel">
    <div id="title">FREECAM</div>

    <button onclick="send('toggleFreecam')">Toggle Freecam</button>

    <button onclick="send('teleport')">Teleport</button>

    <div class="section">Spawn Object</div>
    <select onchange="setObject(this.value)">
        <option value="1">Object #1</option>
        <option value="2">Object #2</option>
        <option value="3">Object #3</option>
    </select>
    <button onclick="send('spawnObject')">Spawn Object</button>

    <div class="section">Spawn Vehicle</div>
    <select onchange="setVehicle(this.value)">
        <option value="1">Vehicle #1</option>
        <option value="2">Vehicle #2</option>
        <option value="3">Vehicle #3</option>
    </select>
    <button onclick="send('spawnVehicle')">Spawn Vehicle</button>

    <button onclick="send('deleteEntity')">Delete Entity</button>
    <button onclick="send('weaponShoot')">Weapon Shoot</button>

    <div class="section">Freecam Speed</div>
    <input type="range" min="0.3" max="5" step="0.1" value="1.5"
           oninput="setSpeed(this.value)">

    <div class="model" id="modelInfo"></div>
</div>

<script>
/* SEND TO LUA */
function send(name) {
    fetch(`https://${GetParentResourceName()}/${name}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: "{}"
    });
}

function setSpeed(val) {
    fetch(`https://${GetParentResourceName()}/setSpeed`, {
        method: "POST",
        body: JSON.stringify({ speed: val })
    });
}

function setObject(index) {
    fetch(`https://${GetParentResourceName()}/setObject`, {
        method: "POST",
        body: JSON.stringify({ index: Number(index) })
    });
}

function setVehicle(index) {
    fetch(`https://${GetParentResourceName()}/setVehicle`, {
        method: "POST",
        body: JSON.stringify({ index: Number(index) })
    });
}

/* RECEIVE FROM LUA */
window.addEventListener("message", function(e) {
    if (e.data.action === "toggle") {
        document.body.style.display = e.data.state ? "block" : "none";
    }
    if (e.data.action === "models") {
        document.getElementById("modelInfo").innerText =
            "Object: " + e.data.object + " | Vehicle: " + e.data.vehicle;
    }
});

/* SCROLL UI SELECTION (VISUAL ONLY) */
window.addEventListener("wheel", e => {
    document.getElementById("panel").style.borderColor =
        e.deltaY < 0 ? "#00ff99" : "#ff4444";
});
</script>

</body>
</html>
