<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freecam UI - FiveM</title>
    <style>
        :root {
            --green: 0, 255, 0;
            --dark-bg: rgba(10, 10, 10, 0.95);
            --light-bg: rgba(30, 30, 30, 0.9);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            margin: 0;
            background: transparent;
            overflow: hidden;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            user-select: none;
            -webkit-user-select: none;
            height: 100vh;
            width: 100vw;
        }

        /* ================= CROSSHAIR ================= */
        .Crosshair {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 22px;
            height: 22px;
            pointer-events: none;
            z-index: 9999;
        }

        .Crosshair::before,
        .Crosshair::after {
            content: '';
            position: absolute;
            background: rgba(var(--green), 0.9);
            box-shadow: 0 0 5px rgba(var(--green), 0.5);
        }

        .Crosshair::before {
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
        }

        .Crosshair::after {
            width: 100%;
            height: 2px;
            top: 50%;
            transform: translateY(-50%);
        }

        /* ================= FREECAM OPTIONS ================= */
        .FCWrapper {
            position: absolute;
            left: 50%;
            bottom: 5vh;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: 12px;
            pointer-events: none;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 25px;
            border-radius: 10px;
            border: 1px solid rgba(var(--green), 0.3);
            backdrop-filter: blur(5px);
            min-width: 250px;
        }

        .Option {
            font-size: 16px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
            text-align: center;
            padding: 8px 15px;
            border-radius: 6px;
            transition: all 0.2s ease;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            cursor: pointer;
            pointer-events: auto;
        }

        .Option:hover {
            background: rgba(var(--green), 0.1);
            transform: translateY(-1px);
        }

        .Option.Selected {
            background: rgba(var(--green), 0.2);
            color: rgb(var(--green));
            font-weight: 600;
            transform: scale(1.05);
            border: 1px solid rgba(var(--green), 0.4);
            box-shadow: 0 0 15px rgba(var(--green), 0.3);
        }

        .FCdash {
            color: rgb(var(--green));
            font-weight: bold;
            margin: 0 10px;
        }

        /* ================= KEYBINDS PANEL ================= */
        .KBLWrapper {
            position: absolute;
            right: 20px;
            top: 20px;
            width: 220px;
            background: rgba(0, 0, 0, 0.85);
            border: 1px solid rgba(var(--green), 0.4);
            border-radius: 8px;
            font-size: 13px;
            color: white;
            z-index: 100;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .KBLHeader {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(var(--green), 0.4);
            text-align: center;
            font-weight: 700;
            font-size: 14px;
            background: rgba(var(--green), 0.1);
            color: rgb(var(--green));
            letter-spacing: 1px;
        }

        .Keybind {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            transition: background 0.2s ease;
        }

        .Keybind:hover {
            background: rgba(var(--green), 0.1);
        }

        .Keybind:last-child {
            border-bottom: none;
        }

        .Keybind span:first-child {
            color: rgba(255, 255, 255, 0.8);
        }

        .Keybind span:last-child {
            color: rgb(var(--green));
            font-weight: 600;
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.5);
            padding: 3px 8px;
            border-radius: 4px;
            border: 1px solid rgba(var(--green), 0.3);
        }

        /* ================= INFO PANEL ================= */
        .InfoPanel {
            position: absolute;
            left: 20px;
            top: 20px;
            background: rgba(0, 0, 0, 0.85);
            border: 1px solid rgba(var(--green), 0.4);
            border-radius: 8px;
            padding: 15px;
            width: 300px;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .InfoHeader {
            color: rgb(var(--green));
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(var(--green), 0.3);
            text-align: center;
        }

        .InfoItem {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 13px;
        }

        .InfoItem:last-child {
            margin-bottom: 0;
        }

        .InfoLabel {
            color: rgba(255, 255, 255, 0.8);
        }

        .InfoValue {
            color: white;
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }

        /* ================= SPEED INDICATOR ================= */
        .SpeedIndicator {
            position: absolute;
            left: 50%;
            bottom: 20vh;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(var(--green), 0.4);
            font-size: 14px;
            font-weight: 600;
            color: rgb(var(--green));
            z-index: 100;
            backdrop-filter: blur(5px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.5);
        }

        /* ================= STATUS INDICATOR ================= */
        .StatusIndicator {
            position: absolute;
            right: 20px;
            bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(0, 0, 0, 0.7);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(var(--green), 0.4);
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        .StatusDot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 0, 0, 0.7);
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .StatusDot.active {
            background: rgba(var(--green), 0.9);
            box-shadow: 0 0 15px rgba(var(--green), 0.7);
        }

        .StatusText {
            font-size: 13px;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        /* ================= MODAL ================= */
        .Modal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 2px solid rgba(var(--green), 0.5);
            border-radius: 10px;
            padding: 25px;
            width: 400px;
            z-index: 1000;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
        }

        .Modal.active {
            display: block;
        }

        .ModalHeader {
            color: rgb(var(--green));
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            text-align: center;
        }

        .ModalContent {
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .ModalButton {
            background: rgba(var(--green), 0.2);
            color: rgb(var(--green));
            border: 1px solid rgba(var(--green), 0.4);
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            font-size: 14px;
        }

        .ModalButton:hover {
            background: rgba(var(--green), 0.3);
            transform: translateY(-2px);
        }

        /* ================= ANIMATIONS ================= */
        @keyframes pulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-in {
            animation: slideIn 0.3s ease;
        }

        /* ================= RESPONSIVE ================= */
        @media (max-height: 800px) {
            .FCWrapper {
                bottom: 2vh;
                gap: 8px;
                padding: 10px 20px;
            }
            
            .Option {
                font-size: 14px;
                padding: 6px 12px;
            }
            
            .SpeedIndicator {
                bottom: 15vh;
            }
        }
    </style>
</head>
<body>

    <!-- CROSSHAIR -->
    <div class="Crosshair"></div>

    <!-- FREECAM OPTIONS -->
    <div class="FCWrapper" id="fcWrapper">
        <div class="Option Selected" data-mode="1"><span class="FCdash">-</span> Default Mode <span class="FCdash">-</span></div>
        <div class="Option" data-mode="2"><span class="FCdash">-</span> Teleport Mode <span class="FCdash">-</span></div>
        <div class="Option" data-mode="3"><span class="FCdash">-</span> Shoot Weapon <span class="FCdash">-</span></div>
        <div class="Option" data-mode="4"><span class="FCdash">-</span> Spawn Object <span class="FCdash">-</span></div>
        <div class="Option" data-mode="5"><span class="FCdash">-</span> Spawn Vehicle <span class="FCdash">-</span></div>
        <div class="Option" data-mode="6"><span class="FCdash">-</span> Delete Entity <span class="FCdash">-</span></div>
    </div>

    <!-- KEYBINDS PANEL -->
    <div class="KBLWrapper">
        <div class="KBLHeader">ðŸŽ® FREE CAM CONTROLS</div>
        <div class="Keybind"><span>Toggle Freecam</span><span>H</span></div>
        <div class="Keybind"><span>Move</span><span>W A S D</span></div>
        <div class="Keybind"><span>Up / Down</span><span>Q / E</span></div>
        <div class="Keybind"><span>Speed Up/Down</span><span>SCROLL</span></div>
        <div class="Keybind"><span>Speed Boost</span><span>LEFT SHIFT</span></div>
        <div class="Keybind"><span>Change Mode</span><span>UP / DOWN</span></div>
        <div class="Keybind"><span>Select Mode</span><span>ENTER</span></div>
        <div class="Keybind"><span>Look Around</span><span>RIGHT CLICK</span></div>
    </div>

    <!-- INFO PANEL -->
    <div class="InfoPanel" id="infoPanel">
        <div class="InfoHeader">ðŸ“Š FREE CAM INFO</div>
        <div class="InfoItem">
            <span class="InfoLabel">Position:</span>
            <span class="InfoValue" id="posX">0.00</span>
            <span class="InfoValue" id="posY">0.00</span>
            <span class="InfoValue" id="posZ">0.00</span>
        </div>
        <div class="InfoItem">
            <span class="InfoLabel">Rotation:</span>
            <span class="InfoValue" id="rotX">0.00</span>
            <span class="InfoValue" id="rotY">0.00</span>
            <span class="InfoValue" id="rotZ">0.00</span>
        </div>
        <div class="InfoItem">
            <span class="InfoLabel">Current Mode:</span>
            <span class="InfoValue" id="currentMode">Default</span>
        </div>
        <div class="InfoItem">
            <span class="InfoLabel">FOV:</span>
            <span class="InfoValue" id="fovValue">50.0</span>
        </div>
        <div class="InfoItem">
            <span class="InfoLabel">Speed:</span>
            <span class="InfoValue" id="speedValue">1.0x</span>
        </div>
    </div>

    <!-- SPEED INDICATOR -->
    <div class="SpeedIndicator" id="speedIndicator">
        Speed: <span id="speedText">1.0x</span>
    </div>

    <!-- STATUS INDICATOR -->
    <div class="StatusIndicator" id="statusIndicator">
        <div class="StatusDot" id="statusDot"></div>
        <span class="StatusText" id="statusText">Freecam: DISABLED</span>
    </div>

    <!-- MODAL FOR SPAWNING -->
    <div class="Modal" id="spawnModal">
        <div class="ModalHeader">ðŸš— Spawn Vehicle</div>
        <div class="ModalContent">
            <p>Enter vehicle model name:</p>
            <input type="text" id="vehicleModel" placeholder="e.g., adder, entityxf" style="width: 100%; padding: 8px; margin: 10px 0; background: rgba(255,255,255,0.1); border: 1px solid rgba(var(--green),0.3); color: white; border-radius: 4px;">
            <p style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">Press ENTER to confirm, ESC to cancel</p>
        </div>
        <button class="ModalButton" onclick="confirmSpawn()">Spawn Vehicle</button>
    </div>

    <!-- MODAL FOR OBJECT SPAWN -->
    <div class="Modal" id="objectModal">
        <div class="ModalHeader">ðŸ“¦ Spawn Object</div>
        <div class="ModalContent">
            <p>Enter object model name:</p>
            <input type="text" id="objectModel" placeholder="e.g., prop_beach_fire" style="width: 100%; padding: 8px; margin: 10px 0; background: rgba(255,255,255,0.1); border: 1px solid rgba(var(--green),0.3); color: white; border-radius: 4px;">
            <p style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">Press ENTER to confirm, ESC to cancel</p>
        </div>
        <button class="ModalButton" onclick="confirmObjectSpawn()">Spawn Object</button>
    </div>

    <script>
        // Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
        let currentMode = 1;
        let freecamEnabled = false;
        let currentSpeed = 1.0;
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const options = document.querySelectorAll('.Option');
        const speedText = document.getElementById('speedText');
        const speedIndicator = document.getElementById('speedIndicator');
        const statusDot = document.getElementById('statusDot');
        const statusText = document.getElementById('statusText');
        const infoPanel = document.getElementById('infoPanel');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        const posX = document.getElementById('posX');
        const posY = document.getElementById('posY');
        const posZ = document.getElementById('posZ');
        const rotX = document.getElementById('rotX');
        const rotY = document.getElementById('rotY');
        const rotZ = document.getElementById('rotZ');
        const currentModeText = document.getElementById('currentMode');
        const fovValue = document.getElementById('fovValue');
        const speedValue = document.getElementById('speedValue');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        const spawnModal = document.getElementById('spawnModal');
        const objectModal = document.getElementById('objectModal');
        const vehicleModelInput = document.getElementById('vehicleModel');
        const objectModelInput = document.getElementById('objectModel');

        // Ø§Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£ÙˆØ¶Ø§Ø¹
        const modeNames = {
            1: "Default",
            2: "Teleport",
            3: "Shoot Weapon",
            4: "Spawn Object",
            5: "Spawn Vehicle",
            6: "Delete Entity"
        };

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Lua
        function updateUI(data) {
            freecamEnabled = data.enabled || false;
            currentMode = data.mode || 1;
            currentSpeed = data.speed || 1.0;
            
            // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±ÙŠ ÙƒØ§Ù…
            updateFreecamStatus(freecamEnabled);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯
            options.forEach((option, index) => {
                const isSelected = (index + 1) === currentMode;
                option.classList.toggle('Selected', isSelected);
                
                // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯
                if (isSelected) {
                    option.style.animation = 'pulse 2s infinite';
                } else {
                    option.style.animation = 'none';
                }
            });
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù…ØªÙˆÙØ±Ø©
            if (data.position) {
                updatePositionInfo(data.position);
            }
            
            if (data.rotation) {
                updateRotationInfo(data.rotation);
            }
            
            if (data.fov) {
                updateFOVInfo(data.fov);
            }
            
            // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø©
            updateSpeedInfo(currentSpeed);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
            currentModeText.textContent = modeNames[currentMode] || "Unknown";
            
            // Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ø³Ø±Ø¹Ø©
            speedIndicator.style.display = freecamEnabled ? 'block' : 'none';
        }

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±ÙŠ ÙƒØ§Ù…
        function updateFreecamStatus(enabled) {
            if (enabled) {
                statusDot.classList.add('active');
                statusText.textContent = 'Freecam: ENABLED';
                infoPanel.style.display = 'block';
                speedIndicator.style.display = 'block';
            } else {
                statusDot.classList.remove('active');
                statusText.textContent = 'Freecam: DISABLED';
                infoPanel.style.display = 'none';
                speedIndicator.style.display = 'none';
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¶Ø¹
        function updatePositionInfo(position) {
            posX.textContent = position.x ? position.x.toFixed(2) : "0.00";
            posY.textContent = position.y ? position.y.toFixed(2) : "0.00";
            posZ.textContent = position.z ? position.z.toFixed(2) : "0.00";
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¯ÙˆØ±Ø§Ù†
        function updateRotationInfo(rotation) {
            rotX.textContent = rotation.x ? rotation.x.toFixed(2) : "0.00";
            rotY.textContent = rotation.y ? rotation.y.toFixed(2) : "0.00";
            rotZ.textContent = rotation.z ? rotation.z.toFixed(2) : "0.00";
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª FOV
        function updateFOVInfo(fov) {
            fovValue.textContent = fov ? fov.toFixed(1) : "50.0";
        }

        // ØªØ­Ø¯ÙŠØ« Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø©
        function updateSpeedInfo(speed) {
            speedText.textContent = speed.toFixed(1) + 'x';
            speedValue.textContent = speed.toFixed(1) + 'x';
            
            // ØªØºÙŠÙŠØ± Ø§Ù„Ù„ÙˆÙ† Ø¨Ù†Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±Ø¹Ø©
            if (speed > 5.0) {
                speedText.style.color = 'rgba(255, 50, 50, 0.9)';
            } else if (speed > 2.0) {
                speedText.style.color = 'rgba(255, 255, 0, 0.9)';
            } else {
                speedText.style.color = 'rgba(0, 255, 0, 0.9)';
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù„Ù€ Lua
        function sendMessageToLua(message) {
            if (window.invokeNative) {
                window.invokeNative('sendMessageToLua', JSON.stringify(message));
            } else if (window.parent !== window) {
                window.parent.postMessage(message, '*');
            }
            
            // Ø·Ø¨Ø§Ø¹Ø© Ù„Ù„ØªØµØ­ÙŠØ­
            console.log('Sending to Lua:', message);
        }

        // ØªØºÙŠÙŠØ± Ø§Ù„ÙˆØ¶Ø¹ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø®ÙŠØ§Ø±
        options.forEach(option => {
            option.addEventListener('click', (e) => {
                const mode = parseInt(e.currentTarget.dataset.mode);
                changeMode(mode);
            });
        });

        // ØªØºÙŠÙŠØ± Ø§Ù„ÙˆØ¶Ø¹
        function changeMode(mode) {
            if (mode < 1) mode = 6;
            if (mode > 6) mode = 1;
            
            currentMode = mode;
            
            // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù€ Lua
            sendMessageToLua({
                action: 'changeMode',
                mode: mode
            });
            
            // ÙØªØ­ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¥Ø°Ø§ ÙƒØ§Ù† ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø¨Ø§ÙˆÙ†
            if (mode === 5) {
                openSpawnModal();
            } else if (mode === 4) {
                openObjectModal();
            }
        }

        // ÙØªØ­ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø³Ø¨Ø§ÙˆÙ†
        function openSpawnModal() {
            spawnModal.classList.add('active');
            vehicleModelInput.value = '';
            vehicleModelInput.focus();
        }

        // ÙØªØ­ Ù…ÙˆØ¯Ø§Ù„ Ø§Ù„Ø£ÙˆØ¨Ø¬ÙƒØª
        function openObjectModal() {
            objectModal.classList.add('active');
            objectModelInput.value = '';
            objectModelInput.focus();
        }

        // Ø¥ØºÙ„Ø§Ù‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª
        function closeAllModals() {
            spawnModal.classList.remove('active');
            objectModal.classList.remove('active');
        }

        // ØªØ£ÙƒÙŠØ¯ Ø³Ø¨Ø§ÙˆÙ† Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
        function confirmSpawn() {
            const model = vehicleModelInput.value.trim();
            if (model) {
                sendMessageToLua({
                    action: 'spawnVehicle',
                    model: model
                });
                closeAllModals();
            }
        }

        // ØªØ£ÙƒÙŠØ¯ Ø³Ø¨Ø§ÙˆÙ† Ø§Ù„Ø£ÙˆØ¨Ø¬ÙƒØª
        function confirmObjectSpawn() {
            const model = objectModelInput.value.trim();
            if (model) {
                sendMessageToLua({
                    action: 'spawnObject',
                    model: model
                });
                closeAllModals();
            }
        }

        // Ø£Ø­Ø¯Ø§Ø« Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„Ù„Ù…ÙˆØ¯Ø§Ù„
        document.addEventListener('keydown', (e) => {
            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ù€ ESC
            if (e.key === 'Escape') {
                closeAllModals();
                // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
                changeMode(1);
            }
            
            // ØªØ£ÙƒÙŠØ¯ Ø¨Ù€ Enter
            if (e.key === 'Enter') {
                if (spawnModal.classList.contains('active')) {
                    confirmSpawn();
                } else if (objectModal.classList.contains('active')) {
                    confirmObjectSpawn();
                }
            }
        });

        // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Lua
        window.addEventListener('message', function(event) {
            try {
                const data = typeof event.data === 'string' ? JSON.parse(event.data) : event.data;
                
                if (data.action === 'updateFreecam') {
                    updateUI(data);
                } else if (data.action === 'setVisible') {
                    document.body.style.display = data.visible ? 'block' : 'none';
                } else if (data.action === 'notification') {
                    showNotification(data.message, data.type);
                }
            } catch (e) {
                console.log('Error parsing message:', e);
            }
        });

        // Ø¥Ø¸Ù‡Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±
        function showNotification(message, type = 'info') {
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Freecam UI initialized');
            
            // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø¯Ø®ÙˆÙ„
            document.querySelectorAll('.FCWrapper, .KBLWrapper, .InfoPanel').forEach(el => {
                el.classList.add('slide-in');
            });
            
            // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªÙ‡ÙŠØ¦Ø© Ù„Ù€ Lua
            setTimeout(() => {
                sendMessageToLua({ action: 'uiReady' });
            }, 1000);
        });

        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ù„Ù„Ù…Ø§ÙˆØ³
        document.addEventListener('mousemove', (e) => {
            const crosshair = document.querySelector('.Crosshair');
            crosshair.style.transform = `translate(calc(-50% + ${e.movementX * 0.1}px), calc(-50% + ${e.movementY * 0.1}px))`;
        });
    </script>
</body>
</html>
